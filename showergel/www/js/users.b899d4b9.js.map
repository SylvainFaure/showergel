{"version":3,"sources":["webpack:///./src/views/Users.vue?d2f1","webpack:///./src/views/Users.vue","webpack:///./src/notifications.js","webpack:///./src/views/Users.vue?b2ef"],"names":["id","class","for","type","form","showUserAdd","aria-label","resetAdd","addUser","addUsername","addPassword","addPasswordConfirmation","addPasswordsMismatch","users","user","key","username","Date","created_at","toLocaleString","modified_at","deleteUser","title","error_handler","error","console","log","response","data","message","computed","this","methods","getUsers","http","get","then","onResults","catch","notifications","put","password","confirm","delete","mounted","render","__scopeId"],"mappings":"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","file":"js/users.b899d4b9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Users.vue?vue&type=style&index=0&id=d8c0eeea&scoped=true&lang=css\"","<template>\n  <div id=\"playout_history\" class=\"content\">\n    <h1>Users</h1>\n    <p>\n      From here you can edit usernames and passwords that will be allowed\n      to stream, if <code>harbor</code> authentication is set up.\n    </p>\n    <button class=\"button block is-primary is-rounded\" @click=\"showUserAdd = true\">Add</button>\n    <div class=\"modal\" :class=\"{ 'is-active': showUserAdd }\">\n      <div class=\"modal-background\"></div>\n      <div class=\"modal-card\">\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title\">Create user account</p>\n          <button class=\"delete\" aria-label=\"close\" @click=\"resetAdd()\"></button>\n        </header>\n        <section class=\"modal-card-body\">\n          <form @submit.prevent=\"addUser()\" class=\"box\" id=\"addUser\">\n          <p>\n            Avoid special characters (even spaces) in usernames.\n          </p>\n          <div class=\"field\">\n              <label class=\"label\" for=\"username\">Username</label>\n              <div class=\"control\">\n                <input class=\"input\" id=\"username\" v-model=\"addUsername\" />\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password\">Pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password\" v-model=\"addPassword\"/>\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password_confirmation\">Confirm pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password_confirmation\" v-model=\"addPasswordConfirmation\" />\n              </div>\n              <p class=\"help is-danger\" v-show=\"addPasswordsMismatch\">\n                Pass phrases don't match\n              </p>\n          </div>\n          </form>\n        </section>\n        <footer class=\"modal-card-foot\">\n          <button class=\"button is-success\" type=\"submit\" form=\"addUser\">Create account</button>\n          <button class=\"button\" @click=\"resetAdd()\">Cancel</button>\n        </footer>\n      </div>\n    </div>\n\n    <div class=\"table-container\">\n      <table class=\"table is-striped\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Created</th>\n            <th>Modified</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user.username\">\n            <td>{{ user.username }}</td>\n            <td>{{ new Date(user.created_at).toLocaleString() }}</td>\n            <td>{{ new Date(user.modified_at).toLocaleString() }}</td>\n            <td>\n              <button\n                class=\"button is-danger icon\"\n                @click=\"deleteUser(user.username)\"\n                title=\"Remove user account\"\n                >\n                  <i class=\"mdi mdi-account-off\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport http from '@/http'\nimport notifications from '@/notifications'\n\nexport default {\n  data () {\n    return {\n      addUsername: '',\n      addPassword: '',\n      addPasswordConfirmation: '',\n      showUserAdd: false,\n      users: []\n    }\n  },\n\n  computed: {\n    addPasswordsMismatch() {\n      return this.addPassword != this.addPasswordConfirmation;\n    }\n  },\n\n  methods: {\n    getUsers () {\n      http.get('/users')\n        .then(this.onResults)\n        .catch(notifications.error_handler);\n    },\n    onResults (response) {\n      this.users = response.data.users\n    },\n    resetAdd () {\n      this.showUserAdd = false;\n      this.addUsername = '';\n      this.addPassword = '';\n      this.addPasswordConfirmation = '';\n    },\n    addUser () {\n      if (! this.addPasswordsMismatch) {\n        http.put('/users', {\n          username: this.addUsername,\n          password: this.addPassword,\n        })\n          .then(this.resetAdd)\n          .then(this.getUsers)\n          .catch(notifications.error_handler);\n      }\n    },\n    deleteUser(username) {\n      if(confirm(`Really remove ${username}'s account ? All related data will be removed too.`)) {\n        http.delete('/users/'+username)\n          .then(this.getUsers)\n          .catch(notifications.error_handler);\n      }\n    }\n  },\n  mounted () {\n    this.getUsers()\n  }\n}\n</script>\n\n<style scoped>\n#showUserAdd {\n    cursor: pointer;\n}\n</style>\n","export default {\n  error_handler: function (error) {\n    console.log(error);\n    if (error.response && error.response.data.message) {\n      console.log(error.response.data.message)\n    }\n  }\n}\n","import { render } from \"./Users.vue?vue&type=template&id=d8c0eeea&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=d8c0eeea&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-d8c0eeea\"\n\nexport default script"],"sourceRoot":""}