{"version":3,"sources":["webpack:///./src/views/Users.vue?52ba","webpack:///./src/views/Users.vue","webpack:///./src/views/Users.vue?b2ef"],"names":["id","class","for","showUserAdd","addUser","aria-label","resetAdd","addUsername","type","addPassword","addPasswordConfirmation","addPasswordsMismatch","users","user","key","username","Date","created_at","toLocaleString","modified_at","deleteUser","title","data","computed","this","methods","getUsers","http","get","then","onResults","catch","error","console","log","response","put","password","confirm","params","URLSearchParams","delete","mounted","render","__scopeId"],"mappings":"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","file":"js/users.faeb4aff.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Users.vue?vue&type=style&index=0&id=07b5fa7a&scoped=true&lang=css\"","<template>\n  <div id=\"playout_history\" class=\"content\">\n    <h1>Users</h1>\n    <p>\n      From here you can edit usernames and passwords that will be allowed\n      to stream, if <code>harbor</code> authentication is set up.\n    </p>\n    <button class=\"button block is-primary is-rounded\" @click=\"showUserAdd = true\">Add</button>\n    <div class=\"modal\" :class=\"{ 'is-active': showUserAdd }\">\n      <div class=\"modal-background\"></div>\n      <div class=\"modal-card\">\n        <form @submit.prevent=\"addUser()\" class=\"box\">\n        <header class=\"modal-card-head\">\n          <p class=\"modal-card-title\">Create user account</p>\n          <button class=\"delete\" aria-label=\"close\" @click=\"resetAdd()\"></button>\n        </header>\n        <section class=\"modal-card-body\">\n          <p>\n            Avoid special characters (even spaces) in usernames.\n          </p>\n          <div class=\"field\">\n              <label class=\"label\" for=\"username\">Username</label>\n              <div class=\"control\">\n                <input class=\"input\" id=\"username\" v-model=\"addUsername\" />\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password\">Pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password\" v-model=\"addPassword\"/>\n              </div>\n          </div>\n          <div class=\"field\">\n              <label class=\"label\" for=\"password_confirmation\">Confirm pass phrase</label>\n              <div class=\"control\">\n                <input class=\"input\" type=\"password\" id=\"password_confirmation\" v-model=\"addPasswordConfirmation\" />\n              </div>\n              <p class=\"help is-danger\" v-show=\"addPasswordsMismatch\">\n                Pass phrases don't match\n              </p>\n          </div>\n        </section>\n        <footer class=\"modal-card-foot\">\n          <button class=\"button is-success\">Create account</button>\n          <button class=\"button\" @click=\"resetAdd()\">Cancel</button>\n        </footer>\n        </form>\n      </div>\n    </div>\n\n    <div class=\"table-container\">\n      <table class=\"table is-striped\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Created</th>\n            <th>Modified</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user.username\">\n            <td>{{ user.username }}</td>\n            <td>{{ new Date(user.created_at).toLocaleString() }}</td>\n            <td>{{ new Date(user.modified_at).toLocaleString() }}</td>\n            <td>\n              <button\n                class=\"button is-danger icon\"\n                @click=\"deleteUser(user.username)\"\n                title=\"Remove user account\"\n                >\n                  <i class=\"mdi mdi-account-off\"></i>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport http from '@/http'\n\nexport default {\n  data () {\n    return {\n      addUsername: '',\n      addPassword: '',\n      addPasswordConfirmation: '',\n      showUserAdd: false,\n      users: []\n    }\n  },\n\n  computed: {\n    addPasswordsMismatch() {\n      return this.addPassword != this.addPasswordConfirmation;\n    }\n  },\n\n  methods: {\n    getUsers () {\n      http.get('/users')\n        .then(this.onResults)\n        .catch(error => { console.log(error) });\n    },\n    onResults (response) {\n      this.users = response.data.users\n    },\n    resetAdd () {\n      this.showUserAdd = false;\n      this.addUsername = '';\n      this.addPassword = '';\n      this.addPasswordConfirmation = '';\n    },\n    addUser () {\n      if (! this.addPasswordsMismatch) {\n        http.put('/users', {\n          username: this.addUsername,\n          password: this.addPassword,\n        })\n          .then(this.resetAdd)\n          .then(this.getUsers)\n          .catch(error => { console.log(error) });\n      }\n    },\n    deleteUser(username) {\n      if(confirm(`Really remove ${username}'s account ? All related data will be removed too.`)) {\n        let params = new URLSearchParams([['username', username]])\n        http.delete('/users', {params: params})\n          .then(this.getUsers)\n          .catch(error => { console.log(error) });\n      }\n    }\n  },\n  mounted () {\n    this.getUsers()\n  }\n}\n</script>\n\n<style scoped>\n#showUserAdd {\n    cursor: pointer;\n}\n</style>\n","import { render } from \"./Users.vue?vue&type=template&id=07b5fa7a&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\n\nimport \"./Users.vue?vue&type=style&index=0&id=07b5fa7a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-07b5fa7a\"\n\nexport default script"],"sourceRoot":""}